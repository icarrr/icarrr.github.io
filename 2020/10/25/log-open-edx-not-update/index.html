<!doctype html><html lang=en-us itemscope itemtype=http://schema.org/WebPage><head><title>Log Open edX Not Update</title><meta http-equiv=cache-control content="public, max-age=31536000"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Faizar Septiawan"><meta name=description content="Read - Search - Ask | Personal Site | Catch your problem solution or read interesting stories on my blog!"><meta name=keywords content="Linux,Unix,BSD,MacOS,Komunitas Pengguna Linux Indonesia,KPLI Klaten,KPLI Bulukumba,MikroTik,MikroTik Indonesia,FreeBSD,FreeBSD Indonesia,Cisco,Cisco Indonesia,BLC Telkom Klaten,Ansible,Nginx,Apache2,Caddy Server,Ayo Belajar Linux,Cloud Computing,e-Learning,Open edX,Proxmox,Sendy,Microsoft SQL Server,MySQL,PostgreSQL,Lets Encrypt,Case Study,Atlassian,Virtualization,Faizar Septiawan,Icar,siBunglonGanteng,siBunglonLabs,Orang Ganteng"><meta name=google-site-verification content="SYE8MCa03gDSATy55M-WppXlauxSYqxjOE9Tg7vEJpM"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-110194945-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-110194945-3');</script><link rel=stylesheet href=/assets/css/external.min.css media=screen><link rel=stylesheet href=/assets/css/styles.css media=screen><link href=/assets/custom/googlefonts/roboto.css rel=stylesheet><link rel=apple-touch-icon-precomposed sizes=144x144 href=/src/images/apple-touch-icon.png><link rel="shortcut icon" href=/src/images/favicon.ico><link href=/posts/index.xml rel=alternate type=application/rss+xml title="The Official Site of siBunglon"><meta property="og:title" content="Log Open edX Not Update"><meta property="og:description" content="Case I&rsquo;ve attach a new disk on my Open edX server, I move Open edX log file into a new disk and create symbolic link to /edx/var because I don&rsquo;t want to make a lot of changes in configuration or hardcode of Open edX.
I moved the log files to the new disk, I did the following:
$ # Stop services $ /edx/bin/supervisorctl stop all $ sudo systemctl stop mongod rabbitmq-server supervisor nginx $ # Rsync log directory to the new disk and make backup on local storage server $ sudo rsync -avP /edx/var/log /edx/backup $ sudo rsync -avP /edx/var/log /media-edx $ # Remove log from edxapp $ sudo rm -rf /edx/var/log $ # Create symbolic link $ sudo ln -sf /media-edx/log /edx/var $ # Start services $ sudo systemctl start mongod rabbitmq-server supervisor nginx When services edX has been start, log file for lms, cms, and tracking is not update."><meta property="og:type" content="article"><meta property="og:url" content="https://sibunglon.com/2020/10/25/log-open-edx-not-update/"><meta property="og:image" content="https://sibunglon.com/assets/img/profil.webp"><meta property="article:published_time" content="2020-10-25T05:34:44+08:00"><meta property="article:modified_time" content="2020-10-25T05:34:44+08:00"><meta property="og:site_name" content="The Official Site of siBunglon"><meta itemprop=name content="Log Open edX Not Update"><meta itemprop=description content="Case I&rsquo;ve attach a new disk on my Open edX server, I move Open edX log file into a new disk and create symbolic link to /edx/var because I don&rsquo;t want to make a lot of changes in configuration or hardcode of Open edX.
I moved the log files to the new disk, I did the following:
$ # Stop services $ /edx/bin/supervisorctl stop all $ sudo systemctl stop mongod rabbitmq-server supervisor nginx $ # Rsync log directory to the new disk and make backup on local storage server $ sudo rsync -avP /edx/var/log /edx/backup $ sudo rsync -avP /edx/var/log /media-edx $ # Remove log from edxapp $ sudo rm -rf /edx/var/log $ # Create symbolic link $ sudo ln -sf /media-edx/log /edx/var $ # Start services $ sudo systemctl start mongod rabbitmq-server supervisor nginx When services edX has been start, log file for lms, cms, and tracking is not update."><meta itemprop=datePublished content="2020-10-25T05:34:44+08:00"><meta itemprop=dateModified content="2020-10-25T05:34:44+08:00"><meta itemprop=wordCount content="342"><meta itemprop=image content="https://sibunglon.com/assets/img/profil.webp"><meta itemprop=keywords content="Open edX,Case Study,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sibunglon.com/assets/img/profil.webp"><meta name=twitter:title content="Log Open edX Not Update"><meta name=twitter:description content="Case I&rsquo;ve attach a new disk on my Open edX server, I move Open edX log file into a new disk and create symbolic link to /edx/var because I don&rsquo;t want to make a lot of changes in configuration or hardcode of Open edX.
I moved the log files to the new disk, I did the following:
$ # Stop services $ /edx/bin/supervisorctl stop all $ sudo systemctl stop mongod rabbitmq-server supervisor nginx $ # Rsync log directory to the new disk and make backup on local storage server $ sudo rsync -avP /edx/var/log /edx/backup $ sudo rsync -avP /edx/var/log /media-edx $ # Remove log from edxapp $ sudo rm -rf /edx/var/log $ # Create symbolic link $ sudo ln -sf /media-edx/log /edx/var $ # Start services $ sudo systemctl start mongod rabbitmq-server supervisor nginx When services edX has been start, log file for lms, cms, and tracking is not update."><link href=/assets/custom/fontawesome-5.15.1/css/all.min.css rel=stylesheet><script defer src=/assets/custom/fontawesome-5.15.1/js/all.min.js></script></head><body><nav><a href=/>siBunglon</a></nav><main class=container><article><header><small><span class=date>October 25, 2020</span></small><h1>Log Open edX Not Update</h1></header><section><p><img src=/assets/img/Open-edX/open-edx-logo.png alt="Linux, Unix, BSD, MacOS, Komunitas Pengguna Linux Indonesia, KPLI Klaten, KPLI Bulukumba, MikroTik, MikroTik Indonesia, FreeBSD, FreeBSD Indonesia, Cisco, Cisco Indonesia, BLC Telkom Klaten, Ansible, Nginx, Apache2, Caddy Server, Ayo Belajar Linux, Cloud Computing, e-Learning, Open edX, Proxmox, Sendy, Microsoft SQL Server, MySQL, PostgreSQL, Lets Encrypt, Case Study, Atlassian, Virtualization, Faizar Septiawan, Icar, siBunglonGanteng, siBunglonLabs, Orang Ganteng"></p><h2 id=case>Case</h2><p>I&rsquo;ve attach a new disk on my Open edX server, I move Open edX log file into a new disk and create symbolic link to /edx/var because I don&rsquo;t want to make a lot of changes in configuration or hardcode of Open edX.</p><p>I moved the log files to the new disk, I did the following:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=c1># Stop services</span>
$ /edx/bin/supervisorctl stop all
$ sudo systemctl stop mongod rabbitmq-server supervisor nginx

$ <span class=c1># Rsync log directory to the new disk and make backup on local storage server</span>
$ sudo rsync -avP /edx/var/log /edx/backup
$ sudo rsync -avP /edx/var/log /media-edx

$ <span class=c1># Remove log from edxapp</span>
$ sudo rm -rf /edx/var/log

$ <span class=c1># Create symbolic link</span>
$ sudo ln -sf /media-edx/log /edx/var

$ <span class=c1># Start services</span>
$ sudo systemctl start mongod rabbitmq-server supervisor nginx
</code></pre></div><p>When services edX has been start, log file for lms, cms, and tracking is not update.</p><h2 id=solution>Solution</h2><p>I&rsquo;m run this command on Open edX server.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo lsof -nn -p <span class=k>$(</span>pidof rsyslogd<span class=k>)</span>
</code></pre></div><p>And find this.</p><pre><code>---
rsyslogd 2502 syslog    8w   REG 202,1   104721    1824885 /edx/var/log/ecomworker/edx.log (deleted)
rsyslogd 2502 syslog    9w   REG 202,1    34915    1827893 /edx/var/log/xqueue/edx.log (deleted)
rsyslogd 2502 syslog   10w   REG 202,1    58789    1824922 /edx/var/log/lms/edx.log (deleted)
rsyslogd 2502 syslog   11w   REG 202,1     3821    1824921 /edx/var/log/insights/edx.log (deleted)
rsyslogd 2502 syslog   12w   REG 202,1   126444    1824869 /edx/var/log/cms/edx.log (deleted)
rsyslogd 2502 syslog   13w   REG 202,1    27029    1827788 /edx/var/log/tracking/tracking.log (deleted)
---
</code></pre><p>Restart <code>rsyslog</code> for reload file log path.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo systemctl restart rsyslog
</code></pre></div><p>When check list of open files using this command.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo lsof -nn -p <span class=k>$(</span>pidof rsyslogd<span class=k>)</span>
</code></pre></div><p>I find this.</p><pre><code>---
rsyslogd 9756 syslog    8w   REG 0,40   111284  4805268258894419596 /media-edx/log/ecomworker/edx.log
rsyslogd 9756 syslog    9w   REG 0,40    45721 13793588914623709624 /media-edx/log/xqueue/edx.log
rsyslogd 9756 syslog   10w   REG 0,40   130154 17067885752292221460 /media-edx/log/cms/edx.log
rsyslogd 9756 syslog   11w   REG 0,40    77549 11746508073636907799 /media-edx/log/lms/edx.log
rsyslogd 9756 syslog   12w   REG 0,40    29150   767045182461436438 /media-edx/log/tracking/tracking.log
rsyslogd 9756 syslog   13w   REG 0,40     4155  5614057283095338575 /media-edx/log/insights/edx.log
---
</code></pre><p>And when i re-check log file for lms, cms, and tracking. Log file is back to normal, log file is up to update.</p></section><footer><hr><div class=meta><p class=tags><a href=/tags/open-edx><span>#</span>Open edX</a>
<a href=/tags/case-study><span>#</span>Case Study</a></p></div><hr><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"sibunglonlabs"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></main><footer><p>&copy; 2020 Faizar Septiawan. <a href=http://creativecommons.org/licenses/by-sa/4.0/>Some Rights Reserved</a>.</p><p>Powered by <a href=https://gohugo.io title="A Fast and Flexible Website Generator">Hugo</a> & <a href=https://github.com/eshlox/simplicity title="Hugo theme">Simplicity</a>.</p></footer><script src=/assets/js/scripts.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-110194945-3','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>